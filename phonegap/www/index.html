<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
    <meta name='format-detection' content='telephone=no' />
    <meta name='viewport' content='user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi' />
    <link rel='stylesheet' type='text/css' href='css/index.css' />
    <script src='https://api.tiles.mapbox.com/mapbox.js/v2.2.1/mapbox.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox.js/v2.2.1/mapbox.css' rel='stylesheet' />
    <title>Gameday Parking</title>
  </head>
  
  <body>
    <header>
        <h3>GameDay Parking</h3>
    </header>
    
    <div id='map'></div>
    <p id="geolocation">Finding geolocation...</p>

<!--     <script type="text/javascript" charset="utf-8">
      document.addEventListener("deviceready", onDeviceReady, false);

      function onDeviceReady() {
          navigator.geolocation.getCurrentPosition(onSuccess, onError);
      }

      function onSuccess(position) {

        var phonelat = position.coords.latitude
        
        var phonelong = position.coords.longitude

        L.mapbox.accessToken = 'pk.eyJ1IjoidGJ5cm5lMTciLCJhIjoiYlZNbDk2dyJ9.KeuoTX5kSyx1G6ozR401gA';
          var geojson = [
            {
              "type": "Feature",
              "geometry": {
                "type": "Point",
                "coordinates": [-88.0620,44.50]
              },
              "properties": {
                "title": "Lambeau Field",
                "description": "1265 Lombardi Ave, Geen Bay, WI 54304",
                "marker-color": "#203731",
                "marker-size": "large",
                "marker-symbol": "america-football"
              }
            },
            {
              "type": "Feature",
              "geometry": {
                "type": "Point",
                "coordinates": [phonelong,phonelat]
              },
              "properties": {
                "title": "Current Location",
                "description": "This is where you are",
                "marker-color": "#fc4353",
                "marker-size": "large",
                "marker-symbol": "star"
              }
            }
           ];

          var map = L.mapbox.map('map', 'mapbox.streets')
            .setView([phonelat,phonelong], 12);

          var featureLayer = L.mapbox.featureLayer()
              .loadURL('192.168.1.87:3000/locations/map.json')
              .addTo(map);

          // map.fitBounds(featureLayer.getBounds());
      }

      function onError(error) {
          alert('code: '    + error.code    + '\n' +
                'message: ' + error.message + '\n');
      }
    </script> -->

    <script>
    L.mapbox.accessToken = 'pk.eyJ1IjoidGJ5cm5lMTciLCJhIjoiYlZNbDk2dyJ9.KeuoTX5kSyx1G6ozR401gA';
      var map = L.mapbox.map('map', 'mapbox.streets')
      .setView([44.5, -88.062], 12);

      // As with any other AJAX request, this technique is subject to the Same Origin Policy:
      // http://en.wikipedia.org/wiki/Same_origin_policy
      // So the CSV file must be on the same domain as the Javascript, or the server
      // delivering it should support CORS.
      var featureLayer = L.mapbox.featureLayer()
        .loadURL('192.168.1.87:3000/locations/map.json')
        .addTo(map);
    </script>
       
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type='text/javascript' src='cordova-5.0.0.js'></script>
    <script type='text/javascript' src='js/lib/zepto.js'></script>
    <script type='text/javascript' src='js/lib/zepto-onpress.js'></script>
    <script type='text/javascript' src='js/index.js'></script>

  </body>
</html>
